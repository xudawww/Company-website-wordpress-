!function(a,b,c,d){"use strict";var e={appp:"undefined"!=typeof a.appp&&a.appp,woo:"undefined"!=typeof a.apppwoo&&a.apppwoo,appbuddy:{},spinner:null,xhr:[],timeout:!1,isWidth600:!0,$:{},modalID:"",push_custom_ajax:{url:"",isPopup:!1},push_custom_noajax:{url:"",isPopup:!1}};e.cacheSelectors=function(){e.$.body=c("body"),e.$.main=c("#main"),e.$.modalInside=c(".modal-inside"),e.$.ioModal=c(".io-modal"),e.UpClasses="slide-in-up-add ng-animate slide-in-up slide-in-up-add-active",e.downClasses="slide-in-up-remove slide-in-up-remove-active",e.dragging=!1,e.browserDebug=!1,e.isDevice=!1},e.init=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e.isDevice=!0),e.cacheSelectors();var d;if(e.appp){if(parent&&(parent.postMessage("site_loaded","*"),e.isLoggedIn()),(c("body").hasClass("activity")||c("body").hasClass("group-home"))&&parent.postMessage("activity_modal","*"),e.log("window.appp",e.appp),e.log("window.apppwoo",e.woo),e.$.body.append('<div class="ajax-spinner"><ion-spinner icon="ios" class="spinner spinner-ios"><svg viewBox="0 0 64 64"><g stroke-width="4" stroke-linecap="round"><line y1="17" y2="29" transform="translate(32,32) rotate(180)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(210)"><animate attributeName="stroke-opacity" dur="750ms" values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(240)"><animate attributeName="stroke-opacity" dur="750ms" values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(270)"><animate attributeName="stroke-opacity" dur="750ms" values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(300)"><animate attributeName="stroke-opacity" dur="750ms" values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(330)"><animate attributeName="stroke-opacity" dur="750ms" values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(0)"><animate attributeName="stroke-opacity" dur="750ms" values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(30)"><animate attributeName="stroke-opacity" dur="750ms" values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(60)"><animate attributeName="stroke-opacity" dur="750ms" values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(90)"><animate attributeName="stroke-opacity" dur="750ms" values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(120)"><animate attributeName="stroke-opacity" dur="750ms" values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(150)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line></g></svg></ion-spinner></div>'),e.$.spinner=c(".ajax-spinner"),a.matchMedia&&(d=a.matchMedia("(min-width: 600px)"),d.addListener(function(a){e.isWidth600=a.matches,e.log("Width "+(e.isWidth600?">":"<")+" 600")})),e.logGroup(!0),e.isWidth600=d&&d.matches,e.infiniteScroll(),e.backhref=e.woo&&e.woo.is_shop?e.woo.shop_url:e.appp.home_url,e.isDevice)var f="touchend";else var f="click";e.$.body.on("click",".comment-reply-login",function(a){a.preventDefault(),c(".menu-left .io-modal-open").trigger("click")}).on("click",".io-modal-open, .io-modal-close",function(b){b.preventDefault(),c(this).hasClass("io-modal-open")?(e.modalID=c(this).attr("href"),"#loginModal"==e.modalID&&c("input[name=redirect_to]").val(a.location),c("#error-message").html(" "),c(e.modalID).css("display","block").removeClass(e.downClasses).addClass(e.UpClasses)):(c(".io-modal").removeClass(e.UpClasses).addClass(e.downClasses).css("display","none"),c("form").trigger("reset"),e.$.spinner.hide())}).on("submit","form#loginform",function(a){var d={processing:"Logging in....",required:"Fields are required",error:"Error Logging in"},f=c(this).serializeArray().reduce(function(a,b){return a[b.name]=b.value,a},{});return""===f.log||""===f.pwd?(a.preventDefault(),void c(".io-modal #error-message").show().text(d.required)):void("undefined"!=typeof appp_ajax_login&&(d=appp_ajax_login,c(".io-modal #error-message").show().text(d.processing),c.ajax({type:"POST",dataType:"json",url:apppCore.ajaxurl,data:{action:"apppajaxlogin",username:c("form#loginform #user_login").val(),password:c("form#loginform #user_pass").val(),security:c("form#loginform #security").val(),rememberme:"forever"}}).done(function(a){if(a.success===!0){var f=a.data.message;c(".io-modal #error-message").text(f),setTimeout(function(){if("undefined"==typeof apppCore)d.reload();else{e.sendLoginMsg(1,a.data);var d=b.location.href;b.location.href="",c('form#loginform input[name="redirect_to"]').val()?b.location.href=c('form#loginform input[name="redirect_to"]').val():b.location.href=d}},1e3)}else c(".io-modal #error-message").show().text(d.error)}).fail(function(a){console.log(a)}),a.preventDefault()))}).on("click",".swiper-slide-content",function(b){var c=jQuery(this).data("href"),d=new RegExp("/"+a.location.host+"/");d.test(c)?apppresser.appp.can_ajax?apppresser.loadAjaxContent(c):location.href=c:"undefined"!=typeof apppCore&&"2"==apppCore.ver?console.log("iabClick will handle external links"):location.href=c}).on("click","#member-nav",function(){c(".has-subnav #subnav").slideUp("fast"),c("#item-nav").slideToggle("fast")}).on("click","#sub-nav-button",function(){c(".has-subnav #subnav").slideToggle("fast"),c("#item-nav").slideUp("fast")}).on("click",".load-more-hijack",function(a){a.preventDefault(),c.ajax({method:"GET",url:a.target.href}).done(function(b){var d=c(b).find("#activity-stream").html();c("#activity-stream").append(d),c(a.target).parent().hide()})}).on("push_custom_data push_alert_dismissed",b,function(b,c){"push_custom_data"==b.type&&"undefined"!=typeof c&&"undefined"!=typeof c.custom&&"undefined"!=typeof c.custom.page_ajax_url?e.push_custom_ajax.url=c.custom.page_ajax_url:"push_custom_data"==b.type&&"undefined"!=typeof c&&"undefined"!=typeof c.custom&&"undefined"!=typeof c.custom.page_noajax_url?e.push_custom_noajax.url=c.custom.page_noajax_url:"push_alert_dismissed"==b.type&&e.push_custom_ajax.url?e.push_custom_ajax.isPopup=!0:"push_alert_dismissed"==b.type&&e.push_custom_noajax.url&&(e.push_custom_noajax.isPopup=!0),e.push_custom_ajax.url&&e.push_custom_ajax.isPopup&&(apppresser.loadAjaxContent(e.push_custom_ajax.url),e.push_custom_ajax.url="",e.push_custom_ajax.isPopup=!1),e.push_custom_noajax.url&&e.push_custom_noajax.isPopup&&("undefined"==typeof apppCore||"1"==apppCore.ver?(a.open(e.push_custom_noajax.url,"_blank"),e.push_custom_noajax.url="",e.push_custom_noajax.isPopup=!1):parent.postMessage("push_noajax_url","*"))}).on("touchmove",function(){e.dragging=!0}).on("touchstart",function(){e.dragging=!1}).on(f,".post-list-item a, .products li a, .wc-forward, .swiper-container a, .dir-list li a,  .push-page",function(a){if(!e.browserDebug&&!e.dragging&&!c(a.currentTarget).hasClass("no-transition")){a.preventDefault();var b={url:a.currentTarget.href,title:""};parent.postMessage(JSON.stringify(b),"*")}}).on("click",".appshare",function(a){a.preventDefault();var b={link:a.currentTarget.dataset.link,msg:a.currentTarget.dataset.msg};parent.postMessage(JSON.stringify(b),"*")}).on("click","#main a, .single-post .entry-content p a, .activity-inner a, .external, .external a, .swiper-container",function(b){var d=new RegExp("/"+a.location.host+"/"),f="_blank",g="location=yes",h="";if("undefined"!=typeof b.target.href?h=b.target.href:"undefined"==typeof b.target.href&&(h=c(this).attr("href")),h&&c(b.target).hasClass("external")||h&&"_blank"==c(b.target).attr("target")||h&&!d.test(h)&&"#"!=h.substr(0,1)){console.log("is external link",a.location.host,h),b.preventDefault(),(c(this).hasClass("system")||e.is_system_link(h))&&(f="_system"),c(this).data("options")?g=c(this).data("options"):c(this).parent().data("options")&&(g=c(this).parent().data("options"));var i="undefined"==typeof b.target.href?c(this).attr("href"):b.target.href;!i&&c(this).find(".swiper-slide-active a").length&&(i=c(this).find(".swiper-slide-active a").attr("href"));var j={iablink:i,options:g,target:f};return void parent.postMessage(JSON.stringify(j),"*")}}).on("click","#attach-photo-ap3",function(a){a.preventDefault();var b={camera:"photo",appbuddy:!0};parent.postMessage(JSON.stringify(b),"*")}).on("click","#capture-photo-btn.btn-camera",function(a){a.preventDefault();var b={camera:"photo"};parent.postMessage(JSON.stringify(b),"*")}).on("click","#photo-library-btn.btn-camera",function(a){console.warn(a),a.preventDefault();var b={camera:"library"};parent.postMessage(JSON.stringify(b),"*")}).on("click","#attach-image-sheet #capture-photo-btn",function(a){a.preventDefault();var b={camera:"photo",appbuddy:!0};parent.postMessage(JSON.stringify(b),"*")}).on("click","#attach-image-sheet #photo-library-btn",function(a){a.preventDefault();var b={camera:"library",appbuddy:!0};parent.postMessage(JSON.stringify(b),"*")}).on("click",".btn-checkin",function(a){a.preventDefault();var b={geo:"checkinhere"};parent.postMessage(JSON.stringify(b),"*")}).on("click",".appfbconnectlogin",function(b){b.preventDefault();var c={fblogin:"login",ajaxurl:a.appp.ajaxurl};parent.postMessage(JSON.stringify(c),"*")}),a.addEventListener("message",function(a){if(a.data.lat)return void e.location(a.data);switch(a.data){case"activity":e.activityModal();break;case"checkin":e.checkinModal();break;case"loginModal":c("#loginModal").css("display","block").removeClass(e.downClasses).addClass(e.UpClasses);break;default:if(0===a.data.indexOf("{")){var b=JSON.parse(a.data);e.handleJsonMessage(b)}}},!1),/iphone|ipad/gi.test(navigator.appVersion)&&c(".menu-layer").addClass("ios_layer_fix"),c.fn.mobileFix=function(d){var e=c(this);return c(b).on("focus",d.inputElements,function(a){e.css("position","fixed")}).on("blur",d.inputElements,function(a){e.css("position","absolute"),setTimeout(function(){c(b).scrollTop(c(b).scrollTop())},1)}).on("focusin",function(){c(a).scrollTop(c(a).scrollTop()+34)}),this},navigator.userAgent.match(/iPhone|iPad|iPod/i)&&c(b).on("load_ajax_content_done",function(){c("#main").mobileFix({inputElements:"#send-to-input"})}),c(b).on("ready load_ajax_content_done",function(){var a;"#loginModal"==location.hash&&(a=e.get_url_param("redirect_to"),a&&(a=decodeURIComponent(a),c("input[name=redirect_to]").val(a)),c("#loginModal").css("display","block").removeClass(e.downClasses).addClass(e.UpClasses))}),c(a).resize(function(){e.appbuddy.setNavStates()})}},e.appbuddy.setNavStates=function(){var b=a.matchMedia("(min-width: 768px)");b.matches?(c(".has-subnav #subnav").show(),c("#item-nav").show()):(c(".has-subnav #subnav").hide(),c("#item-nav").hide())},e.handleJsonMessage=function(a){"undefined"!=typeof a.custom_css?e.doCustomCSS(a.custom_css):"undefined"!=typeof a.pause_event&&e.stopYouTubeVid(a.pause_event.platform)},e.doCustomCSS=function(a){var b=c("#app-customizer-styles2");b&&c(b).remove();var d=c("#body-container");c(d).after('<style id="app-customizer-styles2">'+a+"</style>")},e.activityModal=function(){event.preventDefault(),c("#activity-post-form").css("display","block").removeClass(e.downClasses).addClass(e.UpClasses)},e.checkinModal=function(){event.preventDefault(),c("#geo-checkin-form").css("display","block").removeClass(e.downClasses).addClass(e.UpClasses),c(".ajax-spinner").show()},e.location=function(b){a.ap3_onSuccessGeoPost(b),c(".ajax-spinner").hide()},e.is_system_link=function(a){if("undefined"!=typeof a){var c=b.createElement("a");return c.href=a,!c.port&&a.indexOf(":")>0&&0!=a.indexOf("http")}return!1},e.iOSLayerFix={open:function(){c(".menu-layer").removeClass("ios_layer_fix")},close:function(){c(".menu-layer").addClass("ios_layer_fix")}},e.ioModal=function(){return{open:function(){e.$.ioModal.removeClass(e.downClasses).addClass(e.UpClasses).data("isOpen",!0).trigger("isOpen")},close:function(){e.$.ioModal.removeClass(e.UpClasses).addClass(e.downClasses).data("isOpen",!1).trigger("isClosed"),setTimeout(function(){e.$.ioModal.removeClass(e.downClasses)},150)}}}(),e.untrailingslashit=function(a){return"/"==a.substr(-1)?a.substr(0,a.length-1):a},e.get_url_param=function(a,b){b||(b=location.href),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+a+"=([^&#]*)",d=new RegExp(c),e=d.exec(b);return null==e?null:e[1]},e.log=function(){this.appp.debug&&console&&"function"==typeof console.log&&console.log.apply(console,arguments)},e.logGroup=function(a,b){this.appp.debug&&console&&"function"==typeof console.group&&(a===!0?console.groupEnd():"undefined"==typeof a?b?console.group():console.groupCollapsed():b?console.group(a):console.groupCollapsed(a))},e.sendLoginMsg=function(b,c){var d=b?b:a.appp.loggedin,e={loggedin:d,ajaxurl:a.appp.ajaxurl};c&&(e.message=c.message,e.username=c.username,e.avatar=c.avatar),parent.postMessage(JSON.stringify(e),"*")},e.isLoggedIn=function(){var b="1"==a.appp.loggedin,c={isloggedin:b,avatar_url:a.appp.avatar_url,message:a.appp.loggedin_message};parent.postMessage(JSON.stringify(c),"*")},e.newPassword=function(){var a=c(".reset-code-rsp");if(""===c("#lost_email").val())return a.html("Email required."),!1;var b={action:"app-lost-password",email:c("#lost_email").val(),nonce:c("#app_new_password").val()},d=c.ajax({type:"post",url:appp.ajaxurl,dataType:"json",data:b,success:function(b){a.html(b.data.message),c("input[type=text]").val(""),c("input[type=password]").val("")},error:function(a){console.log("Password reset error "+a)}});return d},e.changePassword=function(){var b=c("#app-pw").val(),d=c("#app-pwr").val(),e=c("#reset-code").val(),f=c(".psw-msg");if(b!=d||""===b)return f.html("Passwords do not match."),!1;if(""===e)return f.html("Please enter your reset code."),!1;var g={action:"app-validate-password",code:e,password:b,nonce:c("#app_new_password").val()},h=c.ajax({type:"post",url:appp.ajaxurl,dataType:"json",data:g,success:function(b){f.html(b.data.message),c("#app-pw").val(""),c("#app-pwr").val(""),b.data.success&&(f.append(" Logging you in..."),setTimeout(function(){a.location.reload()},1e3))}});return h},c("body").on("click","#app-new-password",e.newPassword).on("click","#app-change-password",e.changePassword),e.appendComment=function(a,b){var d;d=c(c(".comment-list")?".comment-list":"#comments"),d.append('<li class="comment item" id="ajax-comment"> <article class="comment-body"> <footer class="comment-meta"> <div class="comment-author vcard"> <cite class="fn">'+a+'</cite> <span class="says">says:</span></div><!-- .comment-author --> <div class="comment-metadata"></div><!-- .comment-metadata --> <p class="comment-awaiting-moderation">Your comment is awaiting moderation.</p> </footer><!-- .comment-meta --> <div class="comment-content"> <p>'+b+"</p> </div><!-- .comment-content --> </article><!-- .comment-body --> </li>")},c("body").on("click","#respond #submit",function(){var a=c(this).closest("#respond").find("#comment"),b=c.trim(a.val());if(""===b)return alert(appp.i18n_required_comment_text),!1;var d=c(this).closest("#respond").find("#rating"),e=d.val();return d.size()>0&&!e&&"yes"===wc_single_product_params.review_rating_required&&""!==b?(alert(wc_single_product_params.i18n_required_rating_text),!1):void 0}),c("body").hasClass("logged-in")&&c(".ajax-comment-form-author, .ajax-comment-form-email, .ajax-comment-form-url").hide(),c("body").on("click",".comment-reply-link",function(){var a=/replytocom=([0-9]*)/,b=a.exec(this.href);c("#ajax-comment-parent").val(b[1]),c(".appp-comment-btn").trigger("click")}).on("click","#ajax-comment-form-submit #submit",function(){var a,b=c("#commentform"),d=c("#comment-status"),f=c(".ajax-comment-form-author #author").val(),g=c(".ajax-comment-form-email #email").val(),h=c(".ajax-comment-form-comment #comment").val(),i=c("#ajax-comment-parent").val(),j=c("body").hasClass("logged-in");if(j)c(".ajax-comment-form-author, .ajax-comment-form-email, .ajax-comment-form-url").hide(),a={comment_post_ID:c("#commentform #comment_post_ID").val(),comment:h,comment_parent:i};else{if(!f||!g||!h)return d.html('<p class="ajax-error" >Please fill out required fields.</p>'),!1;a={author:f,email:g,url:c(".ajax-comment-form-url #url").val(),comment_post_ID:c("#commentform #comment_post_ID").val(),comment:h,comment_parent:i}}d.html('<p class="ajax-placeholder">Processing...</p>');var k=b.attr("action");return c.ajax({type:"post",url:k,data:a,error:function(a,b,c){d.html('<p class="ajax-error" >You might have left one of the fields blank, or be posting too quickly</p>')},success:function(a,g){"success"==g?(d.html('<p class="ajax-success" >Thanks for your comment. We appreciate your response.</p>'),e.appendComment(f,h),setTimeout(function(){c(".io-modal-close").trigger("click")},1500)):(d.html('<p class="ajax-error" >Please wait a while before posting your next comment</p>'),b.find("textarea[name=comment]").val(""))}}),!1}),e.infiniteScroll=function(){var a=c("#main #app-post-list");c(a).append('<p class="load-more">Loading...</p>');var b=c("#app-post-list .load-more"),d=e.getUrlParam("num"),f=2,g=!1,h={allow:!0,reallow:function(){h.allow=!0},delay:400};c("#main").scroll(function(){if(!g&&h.allow&&c(b).length){h.allow=!1,setTimeout(h.reallow,h.delay);var i=c(b).offset().top-c("#main").scrollTop(),j=e.getListType();if(2e3>i){g=!0;var k={action:"appp_load_more",nonce:appp.nonce,page:f,url_query:location.search,posts_per_page:d};c.post(appp.ajaxurl,k,function(d){if(d.success&&""!=d.data){for(var h=d.data.length-1;h>=0;h--)c(a).append(e.getTemplate(j,d.data[h]));c(a).append(b),f+=1,g=!1}else c(".load-more").hide()}).fail(function(a,b,d){console.log("infinite scroll fail"),c(".load-more").hide()})}}})},e.getListType=function(){var b,c=a.location.href.split("?")[1];return b=c.indexOf("list_type")>=0?e.getUrlParam("list_type"):"default"},e.getTemplate=function(a,b){var c='<li class="post-list-item">';return"cardlist"===a?(c+='<a class="card-permalink" href="'+b.permalink+'">',c+='<div class="card">',c+='<div class="item item-text-wrap"><h2>'+b.title+"</h2></div>",c+='<div class="item item-body">',b.full&&(c+='<div class="card-media"><img class="post-thumbnail" src="'+b.full+'" /></div>'),b.excerpt&&(c+='<div class="card-content-inner">'+b.excerpt+"</div>"),c+="</div></div>"):"list"===a?(c+='<a class="item item-text-wrap" href="'+b.permalink+'">',c+='<div class="item-title">'+b.title+"</div>",b.excerpt&&(c+='<div class="item-text"><p>'+b.excerpt+"</p></div>")):(c+='<a class="item item-thumbnail-left item-text-wrap" href="'+b.permalink+'">',b.thumbnail&&(c+='<img class="post-thumbnail" src="'+b.thumbnail+'" />'),c+='<div class="item-title">'+b.title+"</div>",b.excerpt&&(c+='<div class="item-text"><p>'+b.excerpt+"</p></div>")),c+="</a></li>"},e.stopYouTubeVid=function(a){"Android"===a&&setTimeout(function(){var a,b=e.$.main;if(b.length){console.log("Killing youtube vids");for(var c in b)/youtube/.test(b[c].src)&&(a=b[c].src,b[c].src="",b[c].src=a)}},0)},e.getUrlParam=function(b){var c,e,f=decodeURIComponent(a.location.search.substring(1)),g=f.split("&");for(e=0;e<g.length;e++)if(c=g[e].split("="),c[0]===b)return c[1]===d||c[1]},e.init(),a.apppresser=e}(window,document,jQuery);